<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>{{action}} • To Do</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/logo.ico')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css')}}">
    <script src="{{ url_for('static', filename='js/script.js')}}"></script>
</head>
<body>
    <div class="top_panel">
        <button style="float: left;" class="menu_button"></button>
        <a style="float: left;" href="/">To Do</a>
        <div class="search_field" style="float: left;">
            <input placeholder="Поиск">
        </div>
        <a style="float: right; font-size: 13px; margin-right: 20px;" href="/leave-account">Выйти</a>
    </div>

    <h3>Мой день</h3>
    <p class="date">{{date}}</p>

    <div class="container">
        <div class="gettask">
            <div class="btn" style="float: left;">
                <button type="submit"></button>
            </div>
            <form action="/result" method="post">
                <input type="text" name="input_value" autocomplete="off" placeholder="Добавить задачу" style="float: left;" id="task_input">
                <button style="float: right;" class="add_task_button" id="i_add" type="button">Добавить</button>
            </form>
        </div>
        <div class="functionality">
        </div>
    </div>

    <script>
        var input = document.getElementById('task_input');
        const add_button = document.getElementById('i_add');
        const el = document.querySelector('button.add_task_button')
      
        input.addEventListener('input', function() {
          var newValue = input.value;
          if (newValue.length){
            add_button.className = 'active_button';
            el.setAttribute('type', 'submit')
          } else{
            add_button.className = 'add_task_button';
            el.setAttribute('type', 'button')
          }
        });
    </script>

    {% if tasks_length %}
        {% for i in range(tasks_length) %}
            <div class="task">
                <div class="btn" style="float: left;">
                    <form action="/delete-task/{{tasks[i]['id']}}" method="post">
                        <button type="submit"></button>
                    </form>
                </div>
                <p class="main_text">{{ tasks[i]['task'] }}<p>
                <p class="bottom_text">Задачи</p>
            </div>
        {% endfor %}
    {% endif %}
</body>
</html>